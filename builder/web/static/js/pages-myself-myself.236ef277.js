(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-myself-myself"],{"0409":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"my"},[n("v-uni-view",{staticClass:"my-bg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upBackground.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"bg-picture",attrs:{src:t.info.userBg,mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"my-container"},[n("v-uni-view",{staticClass:"contain-introduce"},[t.isLogin?n("v-uni-view",{staticClass:"introduce-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upAvatar.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"left-touxiang",attrs:{src:t.info.userImg,mode:"widthFix"}})],1):t._e(),t.isLogin?n("v-uni-view",{staticClass:"introduce-right"},[n("v-uni-view",{staticClass:"right-nickname"},[t._v(t._s(t.info.nickName))]),n("v-uni-view",{staticClass:"right-desc"},[t._v("这一杯谁不爱! 专业咖啡新鲜式")])],1):t._e(),t.isLogin?t._e():n("v-uni-view",{staticClass:"introduce-isLogin",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToLogin.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"introduce-isLogin-text"},[t._v("登录")])],1)],1)],1),n("v-uni-view",{staticClass:"container-info"},[n("v-uni-view",{staticClass:"info-list"},[n("v-uni-view",{staticClass:"list-ziliao"},[t._v("个人资料")]),n("v-uni-image",{staticClass:"list-icon",attrs:{src:i("b20d"),mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"info-list"},[n("v-uni-view",{staticClass:"list-dingdan"},[t._v("我的订单")]),n("v-uni-image",{staticClass:"list-icon",attrs:{src:i("b20d"),mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"info-list"},[n("v-uni-view",{staticClass:"list-shoucang"},[t._v("我的收藏")]),n("v-uni-image",{staticClass:"list-icon",attrs:{src:i("b20d"),mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"info-list"},[n("v-uni-view",{staticClass:"list-dizhi"},[t._v("地址管理")]),n("v-uni-image",{staticClass:"list-icon",attrs:{src:i("b20d"),mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"info-list"},[n("v-uni-view",{staticClass:"list-dizhi",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.isLogout.apply(void 0,arguments)}}},[t._v("退出登录")]),n("v-uni-image",{staticClass:"list-icon",attrs:{src:i("b20d"),mode:"widthFix"}})],1)],1)],1)},a=[]},"106e":function(t,e,i){"use strict";i.r(e);var n=i("0409"),a=i("88a6");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("ab807");var s=i("828b"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"8f42b55c",null,!1,n["a"],void 0);e["default"]=r.exports},"82d4":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.base64ToPath=function(t){return new Promise((function(e,i){if("object"===("undefined"===typeof window?"undefined":(0,a.default)(window))&&"document"in window){t=t.split(",");var n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),c=r.length,u=new Uint8Array(c);while(c--)u[c]=r.charCodeAt(c);return e((window.URL||window.webkitURL).createObjectURL(new Blob([u],{type:n})))}var d=t.split(",")[0].match(/data\:\S+\/(\S+);/);d?d=d[1]:i(new Error("base64 error"));var f=function(){return Date.now()+String(s++)}()+"."+d;if("object"!==("undefined"===typeof plus?"undefined":(0,a.default)(plus)))if("object"===("undefined"===typeof wx?"undefined":(0,a.default)(wx))&&wx.canIUse("getFileSystemManager")){l=wx.env.USER_DATA_PATH+"/"+f;wx.getFileSystemManager().writeFile({filePath:l,data:o(t),encoding:"base64",success:function(){e(l)},fail:function(t){i(t)}})}else i(new Error("not support"));else{var l="_doc/uniapp_temp/"+f;if(!function(t,e){for(var i=t.split("."),n=e.split("."),a=!1,o=0;o<n.length;o++){var s=i[o]-n[o];if(0!==s){a=s>0;break}}return a}("Android"===plus.os.name?"1.9.9.80627":"1.9.9.80472",plus.runtime.innerVersion))return void plus.io.resolveLocalFileSystemURL("_doc",(function(n){n.getDirectory("uniapp_temp",{create:!0,exclusive:!1},(function(n){n.getFile(f,{create:!0,exclusive:!1},(function(n){n.createWriter((function(n){n.onwrite=function(){e(l)},n.onerror=i,n.seek(0),n.writeAsBinary(o(t))}),i)}),i)}),i)}),i);var v=new plus.nativeObj.Bitmap(f);v.loadBase64Data(t,(function(){v.save(l,{},(function(){v.clear(),e(l)}),(function(t){v.clear(),i(t)}))}),(function(t){v.clear(),i(t)}))}}))},e.pathToBase64=function(t){return new Promise((function(e,i){if("object"===("undefined"===typeof window?"undefined":(0,a.default)(window))&&"document"in window){if("function"===typeof FileReader){var n=new XMLHttpRequest;return n.open("GET",t,!0),n.responseType="blob",n.onload=function(){if(200===this.status){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=i,t.readAsDataURL(this.response)}},n.onerror=i,void n.send()}var o=document.createElement("canvas"),s=o.getContext("2d"),r=new Image;return r.onload=function(){o.width=r.width,o.height=r.height,s.drawImage(r,0,0),e(o.toDataURL()),o.height=o.width=0},r.onerror=i,void(r.src=t)}"object"!==("undefined"===typeof plus?"undefined":(0,a.default)(plus))?"object"===("undefined"===typeof wx?"undefined":(0,a.default)(wx))&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:t,encoding:"base64",success:function(t){e("data:image/png;base64,"+t.data)},fail:function(t){i(t)}}):i(new Error("not support")):plus.io.resolveLocalFileSystemURL(function(t){if(0===t.indexOf("_www")||0===t.indexOf("_doc")||0===t.indexOf("_documents")||0===t.indexOf("_downloads"))return t;if(0===t.indexOf("file://"))return t;if(0===t.indexOf("/storage/emulated/0/"))return t;if(0===t.indexOf("/")){var e=plus.io.convertAbsoluteFileSystem(t);if(e!==t)return e;t=t.substr(1)}return"_www/"+t}(t),(function(t){t.file((function(t){var n=new plus.io.FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){i(t)},n.readAsDataURL(t)}),(function(t){i(t)}))}),(function(t){i(t)}))}))};var a=n(i("fcf3"));function o(t){var e=t.split(",");return e[e.length-1]}i("5ef2"),i("bf0f"),i("7a76"),i("c9b5"),i("5c47"),i("2c10"),i("15d1"),i("d5c6"),i("5a56"),i("f074"),i("4db2"),i("c976"),i("4d8f"),i("7b97"),i("668a"),i("c5b7"),i("8ff5"),i("2378"),i("641a"),i("64e0"),i("cce3"),i("efba"),i("d009"),i("bd7d"),i("7edd"),i("d798"),i("f547"),i("5e54"),i("b60a"),i("8c18"),i("12973"),i("f991"),i("198e"),i("8557"),i("63b1"),i("1954"),i("1cf1"),i("18f7"),i("de6c"),i("dc89"),i("2425");var s=0},"88a6":function(t,e,i){"use strict";i.r(e);var n=i("ee37"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},ab807:function(t,e,i){"use strict";var n=i("fe63"),a=i.n(n);a.a},b20d:function(t,e,i){t.exports=i.p+"static/dayufuhao.png"},e65d:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".my[data-v-8f42b55c]{height:calc(100vh - %?100?%);background-color:#efeff0}.my-container[data-v-8f42b55c]{display:flex;justify-content:center}.contain-introduce[data-v-8f42b55c]{position:relative;top:%?-100?%;display:flex;width:85%;padding:%?20?%;background-color:rgba(237,236,236,.8);border-radius:%?25?% %?25?% 0 0}.bg-picture[data-v-8f42b55c]{width:100%}.introduce-left[data-v-8f42b55c]{width:%?160?%;height:%?160?%;border-radius:50%;overflow:hidden;border:%?20?% solid #fff;margin-right:%?30?%}.left-touxiang[data-v-8f42b55c]{width:100%;height:100%}.introduce-right[data-v-8f42b55c]{position:absolute;left:%?240?%;width:calc(100% - %?240?%)}.right-nickname[data-v-8f42b55c]{padding:%?20?% 0;font-weight:700;color:#00f;font-weight:700}.right-desc[data-v-8f42b55c]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:%?26?%;color:#545454\n\t/* font-weight: bold; */}.container-info[data-v-8f42b55c]{position:relative;top:%?-100?%;margin:0 %?36?%;padding:0 %?20?%;background:#fff;border-radius:25px}.info-list[data-v-8f42b55c]{display:flex;justify-content:space-between;align-items:center;height:%?100?%;border-bottom:%?1?% solid #ddd;font-size:%?28?%;color:#666}.info-list[data-v-8f42b55c]:last-child{border-color:#fff}.list-icon[data-v-8f42b55c]{width:%?28?%}.introduce-isLogin[data-v-8f42b55c]{background-color:#9cbee7;padding:%?30?% %?50?%;border-radius:5px;width:338.75px}.introduce-isLogin-text[data-v-8f42b55c]{padding-left:110px;font-weight:700;font-size:18px;letter-spacing:1.55px}",""]),t.exports=e},ee37:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("5c47"),i("a1c1");var n=i("82d4"),a={data:function(){return{isLogin:!1,info:{},pic:{}}},onShow:function(){this.isGoToLogin(),this.getUserInfo()},methods:{isGoToLogin:function(){var t=JSON.parse(localStorage.getItem("token"));this.isLogin=!!t},goToLogin:function(){uni.navigateTo({url:"/pages/login/login"})},getUserInfo:function(){var t=this;if(this.isLogin){var e=JSON.parse(localStorage.getItem("token"));this.$uni({url:"/findMy",data:{tokenString:e}}).then((function(e){t.info=e[0]}))}},getPic:function(){var t=this;uni.request({url:" https://mock.mengxuegu.com/mock/640097fd7c016026ff2b9468/mypic",method:"POST",data:{appkey:"U2FsdGVkX19WSQ59Cg+Fj9jNZPxRC5y0xB1iV06BeNA="},success:function(e){t.pic.userBg=e.data.picture[1].userBg,t.pic.userImg=e.data.picture[0].userAvatar}})},upAvatar:function(){var t=this;uni.chooseImage({success:function(e){(0,n.pathToBase64)(e.tempFilePaths[0]).then((function(e){var i=e.replace(/^data:image\/[A-Za-z]+;base64,/,"");t.userImg(i)}))}})},userImg:function(t){var e=this;uni.showLoading({title:"用户头像加载中"});var i=JSON.parse(localStorage.getItem("token"));this.$uni({url:"/updateAvatar",method:"POST",data:{imgType:"",tokenString:i,serverBase64Img:t},header:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){uni.hideLoading(),e.getUserInfo()}))},upBackground:function(){var t=this;uni.chooseImage({success:function(e){(0,n.pathToBase64)(e.tempFilePaths[0]).then((function(e){var i=e.replace(/^data:image\/[A-Za-z]+;base64,/,"");t.userBackgroundImg(i)}))}})},userBackgroundImg:function(t){var e=this;uni.showLoading({title:"背景图片加载中"});var i=JSON.parse(localStorage.getItem("token"));this.$uni({url:"/updateUserBg",method:"POST",data:{imgType:"",tokenString:i,serverBase64Img:t},header:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}}).then((function(t){console.log("res =>",t),uni.hideLoading(),e.getUserInfo()}))},isLogout:function(){var t=this;uni.showModal({title:"提示",content:"是否退出登录",confirmColor:"#0c34ba",success:function(e){e.confirm?(uni.setStorageSync("token",""),t.isLogin=!1):e.cancel}})}}};e.default=a},fe63:function(t,e,i){var n=i("e65d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("f2528aca",n,!0,{sourceMap:!1,shadowMode:!1})}}]);